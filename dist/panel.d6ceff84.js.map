{"version":3,"sources":["js/lib/tabs.js","js/lib/API.js","js/lib/loggerTab.js","js/panel.js"],"names":["Tabs","onToggle","undefined","el","document","querySelectorAll","tabs","active","_clicked","target","forEach","e","classList","toggle","dataset","tabName","tabTarget","trim","addEventListener","querySelector","EVENT","INJECT","DETACH","TEST","LOG_BLOB","LOG_INIT","LOG_STOP","PAGES","CONTENT","DEVTOOL","APIServer","constructor","name","_bus","_pool","_flow","_messageId","connect","chrome","runtime","onMessage","addListener","_onMessage","bind","close","disconnect","_answerFlow","data","answer","_newData","type","id","sender","postMessage","resolver","console","warn","error","reject","resolve","onFlow","callback","offFlow","send","Error","Promise","q","qa","logList","capture_btn","mode_buttons","captureMode","isCaptured","devTool","_onModeChange","event","contains","log","_globalIndex","_enableCapture","innerHTML","captureLogs","limit","blob","_pushBlob","_disableCapture","stopCapture","_switchCapture","span","createElement","add","padStart","appendChild","scrollIntoView","inited","_internalInit","enable","status","init","dev","detach","emit","LoggerTab","_TABS","tab","connectionStatus","devAPI","getStatus","then","window","PANEL_API"],"mappings":"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","file":"panel.d6ceff84.js","sourceRoot":"..\\src","sourcesContent":["export function Tabs(onToggle = undefined) {\r\n    /**\r\n     * @type {HTMLElement[]}\r\n     */\r\n    const el = document.querySelectorAll('[data-tab-target]');\r\n    \r\n    /**\r\n     * @type {HTMLElement[]}\r\n    */\r\n    const tabs = document.querySelectorAll('[data-tab-name]');\r\n\r\n    let active = undefined;\r\n\r\n    const _clicked = ({target})=>{\r\n        active = target;\r\n        el.forEach((e)=>{\r\n            e.classList.toggle('active', e === target);\r\n        });\r\n\r\n        tabs.forEach((e)=>{\r\n            e.classList.toggle('active', e.dataset.tabName === active.dataset.tabTarget);\r\n        });\r\n\r\n        onToggle && onToggle(active, active.dataset.tabTarget.trim());\r\n    }\r\n\r\n    el.forEach((e)=>{\r\n        e.addEventListener('click', _clicked);\r\n    });\r\n\r\n    _clicked({target:document.querySelector('.active[data-tab-target]')})\r\n}","export const EVENT = {\r\n\tINJECT: 'inject',\r\n\tDETACH: 'detach',\r\n\tTEST: 'test',\r\n\tLOG_BLOB: 'log',\r\n\tLOG_INIT: 'log-init',\r\n\tLOG_STOP: 'log-stop', \r\n};\r\n\r\nexport const PAGES = {\r\n\tCONTENT: 'content-page',\r\n\tDEVTOOL: 'devtools-page'\r\n}\r\n\r\nexport class APIServer {\r\n\tconstructor(name) {\r\n\t\tthis.name = name;\r\n\t\tthis._bus = undefined;\r\n\t\tthis._pool = {};\r\n\t\tthis._flow = {};\r\n\t\tthis._messageId = 0;\r\n\t}\r\n\r\n\tconnect() {\r\n\t\tthis._bus = chrome.runtime.connect({\r\n\t\t\tname: this.name,\r\n\t\t});\r\n\r\n\t\tthis._bus.onMessage.addListener(this._onMessage.bind(this));\r\n\t}\r\n\r\n\tclose() {\r\n\t\tthis._bus && this._bus.disconnect();\r\n\t\tthis._bus = undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param {any} data\r\n\t * @returns {{answer: Function}} \r\n\t */\r\n\t_answerFlow(data) {\r\n\t\tdata.answer = (_newData = {}) =>{\r\n\t\t\t_newData.type = data.type;\r\n\t\t\t_newData.id = data.id;\r\n\t\t\t_newData.target = data.sender;\r\n\t\t\tthis._bus.postMessage(_newData);\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\t_onMessage(data) {\r\n\t\tconst resolver = this._pool[data.id];\r\n\t\tthis._pool[data.id] = undefined;\r\n\r\n\t\tif (!resolver) {\r\n\t\t\tif (this._flow[data.type]) {\r\n\t\t\t\tthis._flow[data.type](this._answerFlow(data));\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn(\"message resolve not found\", data.id, data.type);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tresolver.reject(data.error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tresolver.resolve(data);\r\n\t\t}\r\n\t}\r\n\r\n\tonFlow(type, callback) {\r\n\t\tthis._flow[type] = callback;\r\n\t}\r\n\r\n\toffFlow(type) {\r\n\t\tthis._flow[type] = false;\r\n\t}\r\n\r\n\tasync send(type, data) {\r\n\t\tif (!this._bus) {\r\n\t\t\tthrow new Error(\"Connection not opened!\");\r\n\t\t}\r\n\r\n\t\tdata.type = type;\r\n\t\tdata.id = this._messageId++;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._pool[data.id] = {\r\n\t\t\t\tid: data.id,\r\n\t\t\t\tresolve,\r\n\t\t\t\treject,\r\n\t\t\t};\r\n\r\n\t\t\tthis._bus.postMessage(data);\r\n\t\t});\r\n\t}\r\n}\r\n","import { EVENT } from \"./API.js\";\r\n\r\nconst q = document.querySelector.bind(document);\r\nconst qa = document.querySelectorAll.bind(document);\r\n\r\n\r\n/**\r\n * @type {HTMLElement}\r\n */\r\nconst logList = q(\"#log-list\");\r\n\r\n/**\r\n * @type {HTMLElement}\r\n */\r\nconst capture_btn = q(\"#capture_button\");\r\n\r\n/**\r\n * @type {HTMLElement[]}\r\n */\r\nconst mode_buttons = qa(\".writers\");\r\n\r\nlet active = false;\r\nlet captureMode = 0;\r\nlet isCaptured = false;\r\n\r\n/**\r\n * @type {IDevToolAPI}\r\n */\r\nlet devTool = undefined;\r\n\r\n/**\r\n *\r\n * @param {MouseEvent} event\r\n */\r\nfunction _onModeChange(event) {\r\n  /**\r\n   * @type {HTMLElement}\r\n   */\r\n  const e = event.target;\r\n  e.classList.toggle(\"active\");\r\n\r\n  captureMode = 0;\r\n  mode_buttons.forEach((e) => {\r\n    if (e.classList.contains(\"active\")) {\r\n      captureMode = captureMode | +e.dataset[\"mode\"];\r\n    }\r\n  });\r\n\r\n  console.log(captureMode);\r\n};\r\n\r\nlet _globalIndex = 0;\r\nfunction _enableCapture() {\r\n\tlogList.innerHTML = '';\r\n\t_globalIndex = 0;\r\n\tdevTool.captureLogs({\r\n\t\ttype: captureMode, limit: 1000000\r\n\t}, (blob)=>{\r\n\t\t_pushBlob(blob);\r\n\t});\r\n\r\n    isCaptured = true;\r\n}\r\n\r\nfunction _disableCapture() {\r\n\tdevTool.stopCapture();\r\n    isCaptured = false;\r\n}\r\n\r\nfunction _switchCapture() {\r\n    if(isCaptured){\r\n        _disableCapture();\r\n    }else{\r\n        _enableCapture();\r\n    }\r\n\r\n    capture_btn.classList.toggle('active', isCaptured);\r\n    mode_buttons.forEach((e) => e.classList.toggle('locked', isCaptured));\r\n}\r\n\r\n/**\r\n * \r\n * @param {string[]} blob \r\n */\r\nfunction _pushBlob(blob) {\r\n\tblob.forEach((e)=>{\r\n\t\tconst span = document.createElement('span');\r\n\t\tspan.classList.add('item');\r\n\t\tspan.innerHTML = `<span class='ticker'>${(\"\" + _globalIndex).padStart(4, '0')}:</span>${e}`;\r\n\r\n\t\tlogList.appendChild(span);\r\n\t\tspan.scrollIntoView(false);\r\n\t\t\r\n\t\t_globalIndex ++;\r\n\r\n\t})\r\n}\r\n\r\n//\r\nmode_buttons.forEach((e) => {\r\n  e.addEventListener(\"click\", _onModeChange);\r\n});\r\n\r\ncapture_btn.addEventListener(\"click\", _switchCapture);\r\n\r\n// ------ -----\r\nlet inited = false;\r\n\r\nasync function _internalInit() {\r\n\r\n}\r\n\r\nfunction enable(status) {\r\n\tactive = status;\r\n\r\n\tif(!status) {\r\n\t\tisCaptured = true;\r\n\t\t_switchCapture();\r\n\t}\r\n\r\n\tif(devTool && active) {\r\n\t\t_internalInit();\r\n\t}\r\n}\r\n\r\nfunction init(dev) {\r\n\tdevTool = dev;\r\n}\r\n\r\nfunction detach() {\r\n\t_disableCapture();\r\n\tdevTool = undefined;\r\n}\r\n\r\nfunction emit(type, data) {\r\n\tif(type === EVENT.LOG_STOP) {\r\n\t\tisCaptured = true;\r\n\t\t_switchCapture();\r\n\t}\r\n}\r\n\r\n\r\nexport const LoggerTab = {\r\n\tname : 'logger',\r\n\tdetach,\r\n\tinit,\r\n\tenable,\r\n\temit\r\n}","import {Tabs} from \"./lib/tabs.js\";\r\nimport {LoggerTab} from \"./lib/loggerTab.js\";\r\n\r\nconst _TABS = [\r\n\tLoggerTab\r\n];\r\n\r\nTabs((e, name)=>{\r\n\t_TABS.forEach((tab)=>{\r\n\t\ttab.enable(tab.name === name);\r\n\t});\r\n});\r\n\r\n\r\nconst connectionStatus = document.querySelector('#online_status');\r\n\r\n//---- ----\r\n\r\n/**\r\n * \r\n * @param {IDevToolAPI} devAPI \r\n */\r\nfunction init(devAPI) {\r\n\t_TABS.forEach((tab)=>{\r\n\t\ttab.init(devAPI);\r\n\t});\r\n\r\n\t// retrive status of connection to AWAY_API\r\n\tdevAPI.getStatus().then((status)=>{\r\n\t\tconnectionStatus.classList.toggle('active', status);\r\n\t});\r\n}\r\n\r\nfunction detach() {\r\n\t_TABS.forEach((tab)=>{\r\n\t\ttab.detach();\r\n\t});\r\n\r\n\tconnectionStatus.classList.toggle('active', false);\r\n}\r\n\r\n// emit events\r\nfunction emit(type, data) {\r\n\t_TABS.forEach(tab => tab.emit && tab.emit(type, data))\r\n}\r\n\r\n/**\r\n * @type {IPanelAPI}\r\n */\r\nwindow.PANEL_API = {\r\n\tinit, detach, emit\r\n}\r\n"]}